<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <link type="text/css" rel="stylesheet" href="css/template.css">
    <link type="text/css" rel="stylesheet" href="css/chosen.min.css">
	<link type="text/css" rel="stylesheet" href="css/jquery-ui.min.css">

    <!-- Use sigma.js for tag graph visualisation -->
    <script type="text/javascript" src="js/sigma.min.js"></script>
    <script type="text/javascript" src="js/sigma.parsers.gexf.min.js"></script>
	<script type="text/javascript" src="js/sigma.canvas.renders.js"></script>
	<script type="text/javascript" src="js/sigma.layout.forceAtlas2.min.js"></script>

   
    <!-- For various purposes -->
    <script type="text/javascript" src="js/jquery-1.11.2.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/underscore-1.7.0.min.js"></script>
    <script type="text/javascript" src="js/chosen.jquery.min.js"></script>
    
    <!-- Functions  -->
    <script type="text/javascript" src="functions.js"></script>
    
    <!-- Color -->
    <script type="text/javascript" src="js/colorscheme.js"></script>
    

    <!-- Global state -->
    <script type="text/javascript">
    window.graph = getUrlParameter("graph");
    window.canvasSize = { width: 802, height: 502 }; //Should follow the hardcoded css value. But it doesn't??
    
    var multi_config = {
        search_contains: true,
        no_results_text: 'No results found',
        placeholder_text_multiple: 'Chose one or more entities...'
    };
    
    var single_config = {
          search_contains: true,
          allow_single_deselect: true,
          placeholder_text_single: 'Chose one entity...'
      };
    
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-60418603-1', 'auto');
  	ga('send', 'pageview');

    //Load data
    $(document).ready(function() {
    	//Graph changer
    	$( "#dialog" ).dialog({
      		modal: true,
      		width: 500,
      		autoOpen: false,
      		show: {
        		effect: "blind",
        		duration: 500
      		},
      		hide: {
        		effect: "explode",
        		duration: 500
      		}
   		 });
    
		$( "#change_graph" ).click(function() {
      		$( "#dialog" ).dialog( "open" );
    	});
    	
    	$.getJSON( "ini.json")
	   	 	.done(function(data) {
    			drawSelectgraph(data);
    			if(window.graph == ""){
	    			$( '.ui-dialog-titlebar-close')[0].style.display = 'none'
	    			//load select network page
	    			$( "#dialog" ).dialog( "open" ); //TODO ADD PARAMETER THAT YOU MAY NOT SHUT DOWN MODAL BOX
    			}
    			else{//Load specific graph
    			    $( '.ui-dialog-titlebar-close')[0].style.display = 'inline'
    			    window.ini = data[window.graph];
    				$("#titel h2").text(ini.graph_header);
    				drawGraph();
	    		}
   	 		})
        	.fail(function(failure) {
                  console.log("Error when loading json file");
                  console.log(failure);
            });
    	
    	
    
    });  
    
    </script>
  </head>
  <body>
    <div id="wrap">
	<div id="dialog" title="Select graph">
  		<p>Please chose basic graph to navigate:</p>
  		<div id="graphs"></div>
	</div>
      <div id="header">
        <div id="titel"><h2></h2></div>
        <div><a id="change_graph" href="#">Change graph</a></div>
      </div>


      <div id="column-1">
        <div id="sigma-container"></div>
      </div>
      
      <div id="column-2">
      	<div id="navigation-wrapper"></div>
      	<span id="status">Waiting for Search engine to load...</span>
      	<div id="details_view"></div>
      <div class="node-size">
    	<p class="title"><strong>Node size - TODO MAKE IT DYNAMIC!</strong></p>
    	<div role="form">
        <label class="radio-inline">
          <input type="radio" name="nodesizeOptions" id="nodesize_original" data-app-basemap-layout-nodesize="original" value="original">original
        </label>
        <label class="radio-inline">
          <input type="radio" name="nodesizeOptions" id="nodesize_degree" data-app-basemap-layout-nodesize="degree" value="degree" checked="checked">degree
        </label>
        <label class="radio-inline">
          <input type="radio" name="nodesizeOptions" id="nodesize_indegree" data-app-basemap-layout-nodesize="indegree" value="indegree">indegree
        </label>
        <label class="radio-inline">
          <input type="radio" name="nodesizeOptions" id="nodesize_outdegree" data-app-basemap-layout-nodesize="outdegree" value="outdegree">outdegree
        </label>
      	</div>
    	<p class="text-info">The layout is usually cleaner when most connected nodes are bigger. The degree is the number of links, the indegree (outdegree) is the number of inbound links (outbound). </p>
  		</div>
      	
      </div>
	</div>
  </body>
</html>
