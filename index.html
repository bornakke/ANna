<!doctype html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <link type="text/css" rel="stylesheet" href="css/template.css">
    <link type="text/css" rel="stylesheet" href="css/chosen.min.css">
	<link type="text/css" rel="stylesheet" href="css/jquery-ui.min.css">
	<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css">
    
    <!-- Use sigma.js for tag graph visualisation -->
    <script type="text/javascript" src="js/sigma.min.js"></script>
    <script type="text/javascript" src="js/sigma.parsers.gexf.min.js"></script>
	<script type="text/javascript" src="js/sigma.canvas.renders.js"></script>
	<script type="text/javascript" src="js/sigma.layout.forceAtlas2.min.js"></script>
	<script type="text/javascript" src="js/sigma.exporters.svg.js"></script>	
   
    <!-- For various purposes -->
    <script type="text/javascript" src="js/jquery-1.11.2.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/underscore-1.7.0.min.js"></script>
    <script type="text/javascript" src="js/chosen.jquery.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>

    
    <!-- ANna JS -->
    <script type="text/javascript" src="functions.js"></script>
    <script type="text/javascript" src="helpers.js"></script>
    
    <!-- Color -->
    <script type="text/javascript" src="js/colorscheme.js"></script>
    

    <!-- Global state -->
    <script type="text/javascript">
    window.graph = getUrlParameter("graph");
    
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-60418603-1', 'auto');
  	ga('send', 'pageview');
  	
    //Load data
    $(document).ready(function() {
    	$('#status').button('loading'); //Set loading sign
    	//Graph changer
    	$( "#dialog" ).dialog({
      		modal: true,
      		width: 500,
      		autoOpen: false,
      		show: {
        		effect: "blind",
        		duration: 500
      		},
      		hide: {
        		effect: "explode",
        		duration: 500
      		}
   		 });
    
		$( "#graph_changer" ).click(function() {
      		$( "#dialog" ).dialog( "open" );
    	});
    	
    	$.getJSON( "ini.json")
	   	 	.done(function(data) {
    			selectGraph(data);
    			$("#titel").text(data.globalsettings.header);
    			if(window.graph == ""){
	    			$( '.ui-dialog-titlebar-close')[0].style.display = 'none';
	    			//load select network page
	    			$( "#dialog" ).dialog( "open" ); //TODO ADD PARAMETER THAT YOU MAY NOT SHUT DOWN MODAL BOX
    			}
    			else{//Load specific graph
    			    $( '.ui-dialog-titlebar-close')[0].style.display = 'inline';			    
    			    window.ini = data[window.graph];
    				$("#graph_changer").text(ini.graph_header);
    				drawGraph();
	    		}
	    		//Hide all menus and turn them on one by one upon population
				$('#menu li').each(function (){
  					$(this).hide();
				});	
	    		
	    		//Create canvasSize object
	    		calCanvassize();
	    		//Listen for resize
			 	var myEfficientFn = _.debounce(function() {
			 		calCanvassize(); 
			 	}, 250);
				window.addEventListener('resize', myEfficientFn);
   	 		})
        	.fail(function(failure) {
                  console.log("Error when loading json file");
                  console.log(failure);
            });
    	
    });  
   
    </script>
</head>
<body>
	<div id="container">
		<!-- Header row-->
		<div class="row">
			<div class="page-header col-md-9">
				<h1>
				<span id="titel"></span>
				<small><a id="graph_changer" href="#"></a><span class="glyphicon glyphicon-book"></span></small>
				</h1>
			</div>
			
			<div id="status_container" class="col-md-2">
				<button type="button" id="status" data-loading-text="Loading Search engine..." data-complete-text="Network loaded." data-error-text="The system encountered an error" class="btn btn-info btn-block" autocomplete="off"></button>
			</div>
			<div id="dialog" title="Select graph">
  				<p>Please chose basic graph to navigate:</p>
  				<div id="graphs"></div>
  			</div>
      	</div>
	  	
	  	<!-- Content row-->
	  	<div class="row">
        	<div id="sigma-container" class="col-md-10">
        		<div class="col.md-1 leftButtons">
        			<div id="resetcamera" >
						<button type="button" class="btn btn-default" aria-label="Reset camera" onclick="resetCamera(); this.blur();">
  							<span class="glyphicon glyphicon-repeat" aria-hidden="true"></span> Reset view
						</button>
					</div>

					<div id="savetoSVG" class="col.md-1">
						<button type="button" class="btn btn-default" aria-label="Save to SVG" onclick="captureSVG(); this.blur();">
  							<span class="glyphicon glyphicon-save" aria-hidden="true"></span> Capture SVG
						</button>
					</div>
					<div id="savetoCanvas" class="col.md-1">
						<button type="button" class="btn btn-default" aria-label="Save to Canvas" onclick="captureCanvas(); this.blur();">
  							<span class="glyphicon glyphicon-save" aria-hidden="true"></span> Capture Canvas
						</button>
					</div>
				</div>

		  	
		  	
		  		<!-- Tab panes -->
  				<div id="settings" class="col-md-3 well">
  					<div id="menu" role="tabpanel">
  				   		<ul class="nav nav-pills nav-justified" role="tablist">
    						<li id="size_menu" role="presentation" class="menu_element"><a href="#size" aria-controls="size" role="tab" data-toggle="tab">Size</a></li>
			  				<li id="color_menu" role="presentation" class="menu_element"><a href="#color" aria-controls="color" role="tab" data-toggle="tab">Color</a></li>
	    					<li id="layout_menu" role="presentation" class="menu_element"><a href="#layout" aria-controls="layout" role="tab" data-toggle="tab">Layout</a></li> 
    						<li id="search_menu" role="presentation" class="menu_element"><a href="#search" aria-controls="search" role="tab" data-toggle="tab">Search</a></li>
				  		</ul>
			  		</div>
			  		<div class="tab-content">
    					<div role="tabpanel" class="tab-pane active" id="size">
    						<div id="size_by_container"></div>
    					</div>
    					<div role="tabpanel" class="tab-pane" id="color">
    						<div id="color_by_container"><span class="glyphicon glyphicon-erase"></span></div>
    					</div>
    					<div role="tabpanel" class="tab-pane" id="layout">
    						<div id="merge_by_container"><span class="glyphicon glyphicon-qrcode"></div>
    						<div id="compare_by_container"><span class="glyphicon glyphicon-stats"></div>
    					</div>
    					<div role="tabpanel" class="tab-pane" id="search">
    						<div id="filter_by_container"><div><span class="glyphicon glyphicon-filter"></span> Filter:</div></div>
    						<div id="highlight_by_container"><div><span class="glyphicon glyphicon-pushpin"></span> Highlight:</div></div>
    					</div>
  					</div>
				</div>
				<div id="details_view" class="col-md-2 well"></div>
					
        </div>
	</div>
</body>
</html>